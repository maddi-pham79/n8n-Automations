{
  "name": "Chatbot & Calendar",
  "nodes": [
    {
      "parameters": {
        "public": true,
        "initialMessages": "Hi there! üëã\nMy name is Maddie. How can I assist you today?",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.1,
      "position": [
        0,
        0
      ],
      "id": "5ebcf972-9023-496f-b8a4-86cbf7824a95",
      "name": "When chat message received",
      "webhookId": "86e85f5c-785b-4bf9-92ed-8d6b5b76df8f"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        80,
        192
      ],
      "id": "c99ea7ce-c1eb-4274-8833-c73d2a34f547",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "GjFdIdNxszyjPcwN",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        224,
        192
      ],
      "id": "d8e2866d-faa7-4ff2-ba94-1a9c30d6a36e",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "descriptionType": "manual",
        "toolDescription": "You get data from this Google Sheet to answer the queries regarding the data",
        "documentId": {
          "__rl": true,
          "value": "1Ia28kkOzWdlDoemHva2C8jJhQZinHuGNvPMIwwcXCWQ",
          "mode": "list",
          "cachedResultName": "Education n8n sheets",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Ia28kkOzWdlDoemHva2C8jJhQZinHuGNvPMIwwcXCWQ/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Ia28kkOzWdlDoemHva2C8jJhQZinHuGNvPMIwwcXCWQ/edit#gid=0"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheetsTool",
      "typeVersion": 4.6,
      "position": [
        368,
        192
      ],
      "id": "c15f7210-d9c9-43e5-bd37-5af95a8ce7db",
      "name": "Get row(s) in sheet in Google Sheets",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "noDcpW7quePhvVhL",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1Ia28kkOzWdlDoemHva2C8jJhQZinHuGNvPMIwwcXCWQ",
          "mode": "list",
          "cachedResultName": "Education n8n sheets",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Ia28kkOzWdlDoemHva2C8jJhQZinHuGNvPMIwwcXCWQ/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Ia28kkOzWdlDoemHva2C8jJhQZinHuGNvPMIwwcXCWQ/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "ID": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('ID__using_to_match_', ``, 'string') }}",
            "Question": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Question', ``, 'string') }}",
            "Answer": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Answer', ``, 'string') }}"
          },
          "matchingColumns": [
            "ID"
          ],
          "schema": [
            {
              "id": "ID",
              "displayName": "ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Question",
              "displayName": "Question",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Answer",
              "displayName": "Answer",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {
          "cellFormat": "USER_ENTERED"
        }
      },
      "type": "n8n-nodes-base.googleSheetsTool",
      "typeVersion": 4.6,
      "position": [
        512,
        192
      ],
      "id": "f36f0b88-be33-4903-92f5-e753115319b1",
      "name": "Append or update row in sheet in Google Sheets",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "noDcpW7quePhvVhL",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "options": {
          "systemMessage": "=You are a helpful assistant.\nYou are a document intSystem Message: Document Intelligence & Demo Scheduling Assistant\n\nYou are an intelligent assistant with full access to the contents of a designated Google Drive folder and connected tools (e.g., Google Sheets, Google Calendar). Your primary responsibilities fall into two categories:\n\n‚∏ª\n\nA. FAQ Answering (Document Intelligence)\n\t1.\tComprehension: Parse and understand the contents of all documents in the Google Drive folder, including but not limited to PDFs, Word files, spreadsheets, presentations, and text documents.\n\t2.\tKnowledge Mapping: Build and maintain a structured mental model of key facts, themes, and data extracted from the documents.\n\t3.\tAnswering Questions: Respond to user queries strictly based on the available content. Do not speculate, hallucinate, or fabricate answers.\n\t4.\tSource Attribution: Whenever possible, support answers with specific source references (e.g., file name, page number, section heading).\n\t5.\tUnavailable Information: If a question cannot be answered using the provided documents, clearly respond with ‚ÄúNo information available in the documents.‚Äù\n\nAfter answering any FAQ-related question, offer the user a call to action (CTA) such as:\n\n‚ÄúWould you like to schedule a demo class with us?‚Äù\n\nIf the user agrees, proceed to Section B (Demo Scheduling).\n\n‚∏ª\n\nB. Demo Scheduling (Calendar Integration)\n\nIf the user expresses interest in scheduling a demo:\n\t1.\tRetrieve Slots: Access the school‚Äôs connected Google Calendar and retrieve all available scheduled class times.\n\t2.\tFilter Slots: Only display time slots that are longer than 1 hour.\n\t3.\tCollect User Info: Prompt the user for their email address to confirm the booking.\n\t4.\tConfirm Booking: Finalize and confirm the selected demo slot.\n\nNOTE: \n1. UPDATE\nthe user can update the time, title of events.\nYou first GET event ID from the calendar the event ID  to identify which event to update the time.\n\n2. DELETE\nthe user can delete events.\nYou first GET event ID from the calendar the event ID  to identify which event to delete.\n\n‚∏ª\n\nAdditional Notes\n\t‚Ä¢\tDocuments may vary in tone, format, or structure. You are expected to unify and summarize their content clearly and consistently.\n\t‚Ä¢\tYour answers should always prioritize fidelity to source material.\n\t‚Ä¢\tNever invent or infer facts beyond what is stated in the documents.\n\t‚Ä¢\tWhen in doubt or in absence of evidence, respond with ‚ÄúNo information‚Äù.\n\n‚∏ª\n\nCurrent system time: {{ $now }}elligence assistant with full access to the contents of a Google Drive folder.\n\n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.1,
      "position": [
        544,
        0
      ],
      "id": "e23f2605-a609-4145-b2ae-e6f16c599a51",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "calendar": {
          "__rl": true,
          "value": "phuong.quepham185@gmail.com",
          "mode": "list",
          "cachedResultName": "phuong.quepham185@gmail.com"
        },
        "start": "={{ $fromAI('startTime',\"This is the event start time\") }}",
        "end": "={{ $fromAI('endTime','This is the end time')}}",
        "useDefaultReminders": "={{ $fromAI('Use_Default_Reminders', ``, 'boolean') }}",
        "additionalFields": {
          "attendees": [
            "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('attendees0_Attendees', `this is the prospect email, so we can send the meeting invite to`, 'string') }}"
          ],
          "summary": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Summary', `This is the summary/title of the event`, 'string') }}"
        }
      },
      "type": "n8n-nodes-base.googleCalendarTool",
      "typeVersion": 1.3,
      "position": [
        688,
        192
      ],
      "id": "3ac8ea68-fd75-45a4-a731-843aa1b0933d",
      "name": "Create an event in Google Calendar",
      "credentials": {
        "googleCalendarOAuth2Api": {
          "id": "M8uC4NDTlLMLUA6k",
          "name": "Google Calendar account 2"
        }
      }
    },
    {
      "parameters": {
        "operation": "getAll",
        "calendar": {
          "__rl": true,
          "value": "phuong.quepham185@gmail.com",
          "mode": "list",
          "cachedResultName": "phuong.quepham185@gmail.com"
        },
        "limit": 20,
        "timeMin": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('After', `This is the range when user serach for dates in the future`, 'string') }}",
        "timeMax": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Before', `This is the range when user serach for dates in the past`, 'string') }}",
        "options": {}
      },
      "type": "n8n-nodes-base.googleCalendarTool",
      "typeVersion": 1.3,
      "position": [
        864,
        192
      ],
      "id": "0bd69161-1ab9-4dd6-86c0-dcb3e32dedc0",
      "name": "Get many events in Google Calendar",
      "credentials": {
        "googleCalendarOAuth2Api": {
          "id": "M8uC4NDTlLMLUA6k",
          "name": "Google Calendar account 2"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "calendar": {
          "__rl": true,
          "value": "phuong.quepham185@gmail.com",
          "mode": "list",
          "cachedResultName": "phuong.quepham185@gmail.com"
        },
        "eventId": "={{ $fromAI('Event_ID', 'string') }}",
        "updateFields": {
          "attendeesUi": {
            "values": {
              "mode": "=add",
              "attendees": []
            }
          },
          "end": "={{ $fromAI(\"endTime\") }}",
          "start": "={{ $fromAI(\"startTime\") }}",
          "summary": "={{ $fromAI('Summary', `This is the event summary/title`, 'string') }}"
        }
      },
      "type": "n8n-nodes-base.googleCalendarTool",
      "typeVersion": 1.3,
      "position": [
        1072,
        192
      ],
      "id": "e499f619-693a-42e8-b86d-2e9909e7ecf8",
      "name": "Update an event in Google Calendar",
      "credentials": {
        "googleCalendarOAuth2Api": {
          "id": "M8uC4NDTlLMLUA6k",
          "name": "Google Calendar account 2"
        }
      }
    },
    {
      "parameters": {
        "operation": "delete",
        "calendar": {
          "__rl": true,
          "value": "phuong.quepham185@gmail.com",
          "mode": "list",
          "cachedResultName": "phuong.quepham185@gmail.com"
        },
        "eventId": "={{ $fromAI('eventID') }}",
        "options": {
          "sendUpdates": "all"
        }
      },
      "type": "n8n-nodes-base.googleCalendarTool",
      "typeVersion": 1.3,
      "position": [
        1248,
        192
      ],
      "id": "cd4b3a4e-a347-424b-a044-87e32515bed3",
      "name": "Delete an event in Google Calendar",
      "credentials": {
        "googleCalendarOAuth2Api": {
          "id": "M8uC4NDTlLMLUA6k",
          "name": "Google Calendar account 2"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "When chat message received": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet in Google Sheets": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Append or update row in sheet in Google Sheets": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Create an event in Google Calendar": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Get many events in Google Calendar": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Update an event in Google Calendar": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Delete an event in Google Calendar": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "8d8b5cc1-7640-4371-91f0-153a31dd956a",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "455c04afe429467177cce15d5d0af7fc0d5f8c0c2daa8db84b8dbe645d9a4079"
  },
  "id": "s3riDmbu75n88gyQ",
  "tags": []
}
